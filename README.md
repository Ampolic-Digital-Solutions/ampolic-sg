# Blockable

Blockable is Ampolic's custom-made, block based static site generator written in python. The philosophy behind
blockable is that a large majority of websites use the same snippets of HTML repeatedly just with
different content. We believe snippets like this should be made into "blocks" which can be reused as many times
as need be when developing your website.

### NOTE: Blockable is still a work in progress and not ready for use yet

## Motivation/FAQ

### Why static sites?

In our experience, a majority of sites rarely change there website enough to warrant a call to an SQL server 
on every load. This makes CMS's like Wordpress impractical for most websites and unnecessarily slow.

### Why not just use Hugo or Jekyll?

One of the most important things we wanted in a site generator was well integrated support for reusing the same snippet
of code with different content. While I'm aware Hugo and Jekyll have ways of reusing code, they're weren't as fledged out as we 
would have liked.

In addition to reusing code snippets, we wanted to write the HTML in a complete coding language (even if that sometimes means 
just typing return along with a large block of HTML in quotes). Once again, I'm aware that lots of templating engine support simple
for and while loops however we believe these lack the power of a real language.

### Why not use a templating engine like Jinja?

Why learn a templating engine syntax when you can just write python and use a data object to access content?

### Why python?

I just like python

## Terminology

There are a lot of custom site generators out there and all of them use different terminology to mean different things. So to clear
things up, below is a list of the terms and how we will be using them.

### Page

A page is simply a genetic term for an HTML file. How a page looks is determined by the __layout__ it uses.

### Layout

A layout is template used to generate a page. Layouts can be unique to a page or used by multiple pages. Which layout which page
uses is determined by the __data__ file.

### Data/Content

Data/Content is generated by a CMS like Netilfy and is stored in JSON files in the data folder. Each page has a unique data file associated
with it which specifies the layout to be used and the content to be displayed.

### Blocks

Blocks are snippets of HTML that can be used when creating page layouts.

### Collection

Collections are ways of organizing pages. There are two types of collections, __data-based collections__ and __layout-based collections__.
Data-based collections are collections which have multiple pages all using the same layout but with different data. Layout-based collections
are collections where each page has a unique layout and data file associated with it. I.e. data-based collections are useful for blogs, shops, etc
while layout-based collection are useful for unique pages such as a homepage, about us, contact, etc.

### Templates

We use template as a catch all term to represent files capable of generating HTML when given a data file.

## Documentation

Blockable is still a work in progress (see goals for more information), however in its current state, Blockable is designed
to work like so:

When creating a website, there should be three primary folders: blocks, layouts, and assets. The assets folder should contain
a folder for each type of asset you want site wide (css, js, fonts, images, etc.). The blocks and layouts folder mimic each other
in that each folder should contain a folder for each block/layout you want to create. These folders should then contain an index.py, a 
stylesheet.css and javascript.js if necessary, and a fields.json (more on this later).   

index.py should define one main function called main(). This function should accept one variable (which will contain a dictionary of all the data
requested in fields.json), and it should return a string of the html for that template. When writing your templates, you should make use of the blockable.blocks
module which contains every block you defined in your blocks folder accessible by the name of the folder:

  ```python
  from blockable import blocks
  blocks.nav_bar(data["nav_bar"])
  ```

# Asset Functions

To include stylesheets within your program, developers should import the function assets from blockable:

```python
from blockable import assets
```

The asset function accepts a path to an asset from your root blockable directory and returns the link to that asset in the final
compiled site:

```
site_sheet = assets("assets/css/stylesheet.css")
layout_js = assets("layouts/homepage/javascript.js")
````

In order to keep your site csp compliment, developers should also make use of the dynamic_css function:

```python
from blockable import dynamic_css
```

dynamic_css accepts a string of css and returns a link to a newly created stylesheet:

```python
custom_css = dynamic_css("""
.my_class {
	color: black;	
}
""")
```

# Netlify

Currently Blockable only supports Netlify as a CMS although support for more CMSs is planned in the future. In order to use Netlify,
developers should create a netlify.json file and fill it out like a normal config.yml for Netlify (See Netlify documentation for information).
The only difference is that when it comes to defining collections.   

File-based collections (or layout-based collections) are accomplished by defining the collection like normal, except for the "files" section
where developers should add the following dictionary into each file instead of just adding fields:

import (the location of the file you'd like to import such as "layouts/homepage")  
name (the unique name of this import)  
label (the non unique label of this import)  

Folder-based collections (or data-based collections) are created in a similar way except you place the above directory inside the list of collections.   

Next place a fields.json file in every template folder. This file should contain a list of each Netlify field for that template and, if necessary, the above
import dictionary for any extra templates used.   

Finally, run

  ```
  python -m blockable -N
  ```
which will generate a working config.yml for Netlify to use.

# Complication

To compile your site into static html, simply run 

```
python -m blockable [source]
```

Where source is your blockable directory. You may also make use of the -O parameter which allows you to set where the html will be outputted.
